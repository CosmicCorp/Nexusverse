<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Tome 1</title>
  <link rel="icon" type="image/svg+xml" href="icons/N.svg">
  <link rel="stylesheet" href="style2.css">
  <style>
 :root {
    --a4-ratio: 210 / 297;
}

/* ======= GLOBAL ======= */
*,
*::before,
*::after {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body, html {
    height: 100%;
    background: #0f0f0f;
    font-family: 'Orbitron', sans-serif;
    color: #00ffff;
}

/* ======= BOOK VIEWER ======= */
.book-viewer {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 14px;
    text-align: center;
    transition: all 0.3s ease;
}

/* Wrapper pour centrer horizontalement et verticalement */
.spread-wrapper {
    display: flex;
    align-items: center;
    justify-content: center;
    max-height: 88vh;
}

.spread-container {
    position: relative;
    display: flex;
    gap: 14px;
    justify-content: center;
    align-items: center;
    background: radial-gradient(circle at top, #101010 0%, #080808 70%);
    border: 2px solid #00ffff33;
    box-shadow: 0 0 26px #00ffff22;
    padding: 12px;
    border-radius: 14px;
}

/* Séparateur central si deux pages */
.spread-container.has-two::after {
    content: "";
    position: absolute;
    width: 3px;
    height: 84%;
    background: linear-gradient(180deg, transparent, #00ffff55, transparent);
    filter: drop-shadow(0 0 14px #00ffff55);
    pointer-events: none;
    left: 50%;
    top: 8%;
    transform: translateX(-50%);
}

/* ======= PAGES ======= */
.page-frame {
    position: relative;
    height: 86vh;
    width: calc(86vh * var(--a4-ratio));
    max-width: 48vw;
    background: #0f0f0f;
    border: 1px solid #00ffff44;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 0 20px #000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.page-frame img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    background: #0c0c0c;
    transition: opacity 0.3s ease;
}

/* ======= ANIMATIONS ======= */
.flip-left {
    animation: flipLeft 0.5s ease;
    transform-origin: right center;
}
.flip-right {
    animation: flipRight 0.5s ease;
    transform-origin: left center;
}

@keyframes flipLeft {
    0% { transform: rotateY(0deg); opacity: 1; }
    49% { opacity: 0; }
    50% { transform: rotateY(90deg); }
    100% { transform: rotateY(0deg); opacity: 1; }
}
@keyframes flipRight {
    0% { transform: rotateY(0deg); opacity: 1; }
    49% { opacity: 0; }
    50% { transform: rotateY(-90deg); }
    100% { transform: rotateY(0deg); opacity: 1; }
}

/* ======= NAVIGATION ======= */
.book-nav {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 22px;
    margin-top: 20px;
}

.book-btn {
    background: #111;
    color: #00ffff;
    border: 1px solid #00ffff66;
    border-radius: 25px;
    padding: 10px 20px;
    font-weight: bold;
    text-transform: uppercase;
    cursor: pointer;
    transition: all 0.3s ease;
}
.book-btn:hover {
    background: #00ffff22;
    box-shadow: 0 0 12px #00ffff88;
    transform: translateY(-2px);
}

.page-indicator {
    font-family: 'Orbitron', sans-serif;
    color: #66e0e0;
    text-shadow: 0 0 6px #00ffff44;
}

/* ======= GO TO PAGE ======= */
.goto-page {
    display: flex;
    justify-content: center;
    gap: 10px;
    position: relative;
}

.goto-page input {
    padding: 8px 12px;
    background: #0b0b0b;
    border: 1px solid #00ffff88;
    color: #00ffff;
    border-radius: 8px;
    width: 150px;
    font-size: 15px;
    text-align: center;
}

.goto-page input::placeholder {
    color: #00ffff55;
}

/* Enlever les flèches natives */
.goto-page input::-webkit-outer-spin-button,
.goto-page input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}
.goto-page input {
    -moz-appearance: textfield;
}

/* Flèches custom triangles néon */
.input-arrows {
    position: absolute;
    right: 4px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.input-arrows button {
    width: 26px;
    height: 20px;
    border: none;
    background: transparent;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    transition: 0.2s;
}

/* Triangle haut */
.input-arrows button.up::before {
    content: "";
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-bottom: 10px solid #00ffff;
}

/* Triangle bas */
.input-arrows button.down::before {
    content: "";
    width: 0;
    height: 0;
    border-left: 8px solid transparent;
    border-right: 8px solid transparent;
    border-top: 10px solid #00ffff;
}

/* Hover neon glow */
.input-arrows button:hover::before {
    border-bottom-color: #00ffffcc; /* pour up */
    border-top-color: #00ffffcc;    /* pour down */
    filter: drop-shadow(0 0 6px #00ffff88);
}

/* Flèches principales pour avancer/reculer pages */
.arrow-nav {
    display: flex;
    gap: 35px;
    justify-content: center;
}

.arrow-btn {
    font-size: 12px;
    font-weight: 900;
    padding: 12px;
    border: 2px solid #00ffff;
    background: #000;
    color: #00ffff;
    border-radius: 25%;
    cursor: pointer;
    transition: 0.25s ease;
    line-height: 20px;
}
.arrow-btn:hover {
    background: #00ffff22;
    transform: scale(1.15);
    box-shadow: 0 0 12px #00ffff88;
}

/* ======= FULL SCREEN ======= */
.fullpage body,
.fullpage html {
    height: 100%;
    overflow: hidden;
    padding: 0;
    margin: 0;
}

.fullpage .book-viewer,
.fullpage .spread-wrapper,
.fullpage .spread-container {
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
    margin: 0;
}

.fullpage .page-frame {
    height: 96vh;
    width: calc(96vh * var(--a4-ratio));
    max-width: 49vw;
    border: 1px solid #07070766;
    box-shadow: 0 0 40px #04040433;
    margin: 0 auto;
}

/* Cacher navbar/header en plein écran */
.fullpage nav,
.fullpage .navbar,
.fullpage header {
    display: none !important;
}

/* Fullscreen button */
.fullscreen-btn {
    padding: 8px 20px;
    border: 1px solid #00ffff;
    background: transparent;
    color: #00ffff;
    border-radius: 10px;
    cursor: pointer;
    font-weight: bold;
    transition: 0.25s;
}
.fullscreen-btn:hover {
    background: #00ffff22;
    transform: scale(1.05);
}

/* ======= RESPONSIVE ======= */
@media (max-width: 1050px) {
    .spread-container {
        flex-direction: column;
    }
    .page-frame {
        height: 88vh;
        width: calc(88vh * var(--a4-ratio));
        max-width: 92vw;
    }
    .spread-container.has-two::after {
        display: none;
    }
}

@media (max-width: 900px) {
    #leftFrame {
        display: none !important;
    }
    .spread-container {
        flex-direction: column !important;
    }
    .page-frame {
        height: 78vh !important;
        width: 92vw !important;
        max-width: 92vw !important;
    }
    .spread-container.has-two::after {
        display: none !important;
    }
    .book-nav {
        margin-top: 10px !important;
    }
}
/* Ajout d'une règle pour le nouveau wrapper */
.input-field-wrapper {
    position: relative; /* Base pour le positionnement absolu des flèches */
    width: 150px; /* Assurez-vous qu'il a la même largeur que l'input */
}

.goto-page input {
    /* Assurez-vous que l'input remplit son nouveau conteneur */
    width: 100%; 
    /* Ajoutez une marge à droite pour laisser de la place aux flèches */
    padding-right: 32px; /* Pour éviter que le texte ne chevauche les flèches */
}
/* Le reste de votre CSS pour .input-arrows est correct ! */
.input-arrows {
    position: absolute;
    right: 4px;
    top: 50%;
    transform: translateY(-50%);
    /* ... le reste du style ... */
}
.spacer
{
  height: 10px;
}
</style>


</head>
<body>

  <nav>
    <div class="logo">
      <a href="index.html">
        <img src="icons/logo.png" alt="Logo Univers Nexus">
      </a>
    </div>
  </nav>

  <main>
    <section class="book-viewer" id="bookViewer">
      <div class="spread-wrapper">
        <div class="spread-container" id="spread">
          <div class="page-frame" id="leftFrame">
            <img id="leftPage" src="" alt="Page gauche">
          </div>
          <div class="page-frame" id="rightFrame">
            <img id="rightPage" src="" alt="Page droite">
          </div>
        </div>
      </div>

      
<div class="spacer"></div>

<div class="page-indicator" id="pageIndicator">Page 1 / 55</div>
    <!-- Flèches navigation -->
    <div class="arrow-nav">
        <button id="prevPage" class="arrow-btn">◄</button>
        <button id="nextPage" class="arrow-btn">►</button>

    </div>
<div class="book-nav">
    <!-- Barre : Aller à une page -->
 <div class="goto-page">
    <div class="input-field-wrapper"> 
        <input type="number" id="gotoInput" min="1" max="9999" placeholder="Pages">
        
        <div class="input-arrows">
            <button id="pageUp" class="up"></button> <button id="pageDown" class="down"></button> </div>
    </div>
    
    <button id="gotoBtn" class="book-btn">ALLER</button>
</div>
    </div>
    <!-- Plein écran -->
    <button class="fullscreen-btn" id="toggleFull">MODE PLEIN ÉCRAN</button>

</div>


      
      
    </section>
  </main>

  <script>
    document.getElementById("pageUp").addEventListener("click", () => {
  const inp = document.getElementById("gotoInput");
  inp.value = Math.min(pages.length, Number(inp.value || 1) + 1);
});

document.getElementById("pageDown").addEventListener("click", () => {
  const inp = document.getElementById("gotoInput");
  inp.value = Math.max(1, Number(inp.value || 1) - 1);
});

  const pages = [
    "tome1/1.png", "tome1/2.png", "tome1/3.png", "tome1/4.png", "tome1/5.png",
    "tome1/6.png", "tome1/7.png", "tome1/8.png", "tome1/9.png", "tome1/10.png",
    "tome1/11.png", "tome1/12.png", "tome1/13.png", "tome1/14.png", "tome1/15.png",
    "tome1/16.png", "tome1/17.png", "tome1/18.png", "tome1/19.png", "tome1/20.png",
    "tome1/21.png", "tome1/22.png", "tome1/23.png", "tome1/24.png", "tome1/25.png",
    "tome1/26.png", "tome1/27.png", "tome1/28.png", "tome1/29.png", "tome1/30.png",
    "tome1/31.png", "tome1/32.png", "tome1/33.png", "tome1/34.png", "tome1/35.png",
    "tome1/36.png", "tome1/37.png", "tome1/38.png", "tome1/39.png", "tome1/40.png",
    "tome1/41.png", "tome1/42.png", "tome1/43.png", "tome1/44.png", "tome1/45.png",
    "tome1/46.png", "tome1/47.png", "tome1/48.png", "tome1/49.png", "tome1/50.png",
    "tome1/51.png", "tome1/52.png", "tome1/53.png", "tome1/54.png", "tome1/55.png",
    "tome1/56.png", "tome1/57.png", "tome1/58.png", "tome1/59.png", "tome1/60.png",
    "tome1/61.png", "tome1/62.png", "tome1/63.png", "tome1/64.png", "tome1/65.png",
    "tome1/66.png", "tome1/67.png", "tome1/68.png", "tome1/69.png", "tome1/70.png",
    "tome1/71.png", "tome1/72.png", "tome1/73.png", "tome1/74.png", "tome1/75.png",
    "tome1/76.png", "tome1/77.png", "tome1/78.png", "tome1/79.png", "tome1/80.png",
    "tome1/81.png", "tome1/82.png", "tome1/83.png", "tome1/84.png", "tome1/85.png",
    "tome1/86.png", "tome1/87.png", "tome1/88.png", "tome1/89.png", "tome1/90.png",
    "tome1/91.png", "tome1/92.png", "tome1/93.png", "tome1/94.png", "tome1/95.png",
    "tome1/96.png", "tome1/97.png", "tome1/98.png", "tome1/99.png", "tome1/100.png",
    "tome1/101.png", "tome1/102.png", "tome1/103.png"
    
  ];

  let currentIndex = 0;

  const leftFrame = document.getElementById("leftFrame");
  const rightFrame = document.getElementById("rightFrame");
  const leftImg = document.getElementById("leftPage");
  const rightImg = document.getElementById("rightPage");
  const indicator = document.getElementById("pageIndicator");
  const spread = document.getElementById("spread");
  const toggleBtn = document.getElementById("toggleFull");

  function normalizedLeftIndex(index) {
    if (index <= 0) return 0;
    return (index % 2 === 1) ? index : index - 1;
  }
function saveBookmark() {
  localStorage.setItem("lastPage", currentIndex);
}

function loadBookmark() {
  const saved = localStorage.getItem("lastPage");
  if (saved !== null) {
    const num = parseInt(saved, 10);
    if (!isNaN(num) && num >= 0 && num < pages.length) {
      currentIndex = num;
    }
  }
}



document.getElementById("gotoBtn").addEventListener("click", () => {
  const value = parseInt(document.getElementById("gotoInput").value, 10);

  if (isNaN(value)) return;
  if (value < 1 || value > pages.length) return;

  // Conversion : page 1 → index 0, page 2 → index 1... 
  currentIndex = value - 1;

  addFlipAnimation();
  setTimeout(() => {
    renderSpread();
    saveBookmark();
  }, 150);
});

// Permet "Entrée" dans l’input
document.getElementById("gotoInput").addEventListener("keydown", (e) => {
  if (e.key === "Enter") document.getElementById("gotoBtn").click();
});
  function renderSpread() {
    const isMobile = window.innerWidth < 900;
    currentIndex = Math.max(0, Math.min(currentIndex, pages.length - 1));

    if (isMobile) {
      leftFrame.style.display = "none";
      spread.classList.remove("has-two");

      rightImg.src = pages[currentIndex];
      rightImg.alt = "Page " + (currentIndex + 1);

      indicator.textContent = `Page ${currentIndex + 1} / ${pages.length}`;
      return;
    }

    if (currentIndex === 0) {
      leftFrame.style.display = "none";
      spread.classList.remove("has-two");

      rightImg.src = pages[0];
      indicator.textContent = `Page 1 / ${pages.length}`;
      return;
    }

    const leftIndex = normalizedLeftIndex(currentIndex);
    const rightIndex = leftIndex + 1;

    leftFrame.style.display = "flex";
    spread.classList.add("has-two");

    leftImg.src = pages[leftIndex];
    leftImg.alt = "Page " + (leftIndex + 1);

    if (rightIndex < pages.length) {
      rightImg.src = pages[rightIndex];
      rightImg.alt = "Page " + (rightIndex + 1);
      indicator.textContent = `Pages ${leftIndex + 1}-${rightIndex + 1} / ${pages.length}`;
    } else {
      rightImg.src = "";
      rightImg.alt = "";
      indicator.textContent = `Page ${leftIndex + 1} / ${pages.length}`;
    }
  }

  function addFlipAnimation() {
    leftImg.classList.remove("flip-left");
    rightImg.classList.remove("flip-right");
    void leftImg.offsetWidth;
    void rightImg.offsetWidth;
    leftImg.classList.add("flip-left");
    rightImg.classList.add("flip-right");
  }

  document.getElementById("nextPage").addEventListener("click", () => {
    const isMobile = window.innerWidth < 900;

    if (isMobile) {
      if (currentIndex < pages.length - 1) {
        currentIndex++;
        addFlipAnimation();
        setTimeout(() => { renderSpread(); saveBookmark(); }, 160);

      }
      return;
    }

    if (currentIndex === 0) {
      if (pages.length > 1) {
        currentIndex = 1;
        addFlipAnimation();
        setTimeout(() => { renderSpread(); saveBookmark(); }, 160);

      }
      return;
    }

    const leftIndex = normalizedLeftIndex(currentIndex);
    const nextLeft = leftIndex + 2;

    if (nextLeft < pages.length) {
      currentIndex = nextLeft;
      addFlipAnimation();
      setTimeout(renderSpread, 160);
    } else if (leftIndex + 1 < pages.length) {
      currentIndex = pages.length - 1;
      addFlipAnimation();
      setTimeout(() => { renderSpread(); saveBookmark(); }, 160);

    }
  });

  document.getElementById("prevPage").addEventListener("click", () => {
    const isMobile = window.innerWidth < 900;

    if (isMobile) {
      if (currentIndex > 0) {
        currentIndex--;
        addFlipAnimation();
        setTimeout(() => { renderSpread(); saveBookmark(); }, 160);

      }
      return;
    }

    if (currentIndex === 0) return;

    if (currentIndex === 1) {
      currentIndex = 0;
      addFlipAnimation();
      setTimeout(() => { renderSpread(); saveBookmark(); }, 160);

      return;
    }

    const leftIndex = normalizedLeftIndex(currentIndex);
    const prevLeft = Math.max(1, leftIndex - 2);

    currentIndex = prevLeft;
    addFlipAnimation();
    setTimeout(() => { renderSpread(); saveBookmark(); }, 160);

  });

  window.addEventListener("resize", () => {
    clearTimeout(window._resizeTimer);
    window._resizeTimer = setTimeout(renderSpread, 120);
  });

  function toggleFull() {
    document.body.classList.toggle("fullpage");
    toggleBtn.textContent = document.body.classList.contains("fullpage")
      ? "Quitter plein écran"
      : "Mode plein écran";
  }

  toggleBtn.addEventListener("click", toggleFull);

  loadBookmark();
renderSpread();
saveBookmark();

</script>

</body>
</html>
